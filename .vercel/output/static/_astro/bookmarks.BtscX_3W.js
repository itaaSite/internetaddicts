const c="aiz:post-bookmarks",g="aiz:bookmarks-changed",i=()=>typeof window<"u",a=()=>{if(!i())return[];try{const t=localStorage.getItem(c);if(!t)return[];const e=JSON.parse(t);return Array.isArray(e)?e.filter(s=>s&&typeof s.slug=="string"):[]}catch{return[]}},o=t=>{i()&&(localStorage.setItem(c,JSON.stringify(t)),window.dispatchEvent(new CustomEvent(g,{detail:{count:t.length}})))},l=t=>a().some(e=>e.slug===t),f=t=>{const e=a();if(e.some(r=>r.slug===t.slug)){const r=e.filter(u=>u.slug!==t.slug);return o(r),{active:!1,count:r.length}}const n=[{...t,updatedAt:Date.now()},...e.filter(r=>r.slug!==t.slug)];return o(n),{active:!0,count:n.length}};export{l as i,a as r,f as t};
