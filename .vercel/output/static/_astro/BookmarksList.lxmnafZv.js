import{o as oe,i as ce,r as ue,t as de}from"./bookmarks.BCU8-SeT.js";import{c as U,r as G,d as O,p as J,a as B,b as L,h as T,e as S,m as he,s as te,f as re,g as se,E as ve,i as ae,H as ne,j as X,k as V,l as D,n as pe,o as z,q as ge,C as _e,t as me,u as W,v as be,w as K,x as xe,y as Z,z as ie,A as ke,B as Ee,D as we,F as M,I as q,G as ze,J as Te,K as Ae,L as Ce,M as Me,N as H,O as Ne,P as ye,Q as Fe,R as Q,S as N,T as F,U as P,V as Re,W as $,X as Se}from"./render.-uLDKo0a.js";import{s as j}from"./attributes.DROnfKVg.js";class Ie{anchor;#t=new Map;#r=new Map;#e=new Map;#s=new Set;#a=!0;constructor(a,s=!0){this.anchor=a,this.#a=s}#n=()=>{var a=U;if(this.#t.has(a)){var s=this.#t.get(a),f=this.#r.get(s);if(f)G(f),this.#s.delete(s);else{var c=this.#e.get(s);c&&(this.#r.set(s,c.effect),this.#e.delete(s),c.fragment.lastChild.remove(),this.anchor.before(c.fragment),f=c.effect)}for(const[l,i]of this.#t){if(this.#t.delete(l),l===a)break;const r=this.#e.get(i);r&&(O(r.effect),this.#e.delete(i))}for(const[l,i]of this.#r){if(l===s||this.#s.has(l))continue;const r=()=>{if(Array.from(this.#t.values()).includes(l)){var t=document.createDocumentFragment();he(i,t),t.append(B()),this.#e.set(l,{effect:i,fragment:t})}else O(i);this.#s.delete(l),this.#r.delete(l)};this.#a||!f?(this.#s.add(l),J(i,r,!1)):r()}}};#i=a=>{this.#t.delete(a);const s=Array.from(this.#t.values());for(const[f,c]of this.#e)s.includes(f)||(O(c.effect),this.#e.delete(f))};ensure(a,s){var f=U,c=te();if(s&&!this.#r.has(a)&&!this.#e.has(a))if(c){var l=document.createDocumentFragment(),i=B();l.append(i),this.#e.set(a,{effect:L(()=>s(i)),fragment:l})}else this.#r.set(a,L(()=>s(this.anchor)));if(this.#t.set(f,a),c){for(const[r,o]of this.#r)r===a?f.unskip_effect(o):f.skip_effect(o);for(const[r,o]of this.#e)r===a?f.unskip_effect(o.effect):f.skip_effect(o.effect);f.oncommit(this.#n),f.ondiscard(this.#i)}else T&&(this.anchor=S),this.#n()}}function Be(e,a,s=!1){T&&se();var f=new Ie(e),c=s?ve:0;function l(i,r){if(T){const t=ae(e)===ne;if(i===t){var o=X();V(o),f.anchor=o,D(!1),f.ensure(i,r),D(!0);return}}f.ensure(i,r)}re(()=>{var i=!1;a((r,o=!0)=>{i=!0,l(o,r)}),i||l(!1,null)},c)}function De(e,a){return a}function Le(e,a,s){for(var f=[],c=a.length,l,i=a.length,r=0;r<c;r++){let d=a[r];J(d,()=>{if(l){if(l.pending.delete(d),l.done.add(d),l.pending.size===0){var h=e.outrogroups;Y(K(l.done)),h.delete(l),h.size===0&&(e.outrogroups=null)}}else i-=1},!1)}if(i===0){var o=f.length===0&&s!==null;if(o){var t=s,u=t.parentNode;Ae(u),u.append(t),e.items.clear()}Y(a,!o)}else l={pending:new Set(a),done:new Set},(e.outrogroups??=new Set).add(l)}function Y(e,a=!0){for(var s=0;s<e.length;s++)O(e[s],a)}var ee;function He(e,a,s,f,c,l=null){var i=e,r=new Map;{var o=e;i=T?V(pe(o)):o.appendChild(B())}T&&se();var t=null,u=ge(()=>{var v=s();return xe(v)?v:v==null?[]:K(v)}),d,h=!0;function x(){p.fallback=t,Oe(p,d,i,a,f),t!==null&&(d.length===0?(t.f&M)===0?G(t):(t.f^=M,I(t,null,i)):J(t,()=>{t=null}))}var n=re(()=>{d=z(u);var v=d.length;let g=!1;if(T){var _=ae(i)===ne;_!==(v===0)&&(i=X(),V(i),D(!1),g=!0)}for(var k=new Set,m=U,E=te(),A=0;A<v;A+=1){T&&S.nodeType===_e&&S.data===me&&(i=S,g=!0,D(!1));var y=d[A],b=f(y,A),w=h?null:r.get(b);w?(w.v&&W(w.v,y),w.i&&W(w.i,A),E&&m.unskip_effect(w.e)):(w=Ve(r,h?i:ee??=B(),y,b,A,c,a,s),h||(w.e.f|=M),r.set(b,w)),k.add(b)}if(v===0&&l&&!t&&(h?t=L(()=>l(i)):(t=L(()=>l(ee??=B())),t.f|=M)),v>k.size&&be(),T&&v>0&&V(X()),!h)if(E){for(const[fe,le]of r)k.has(fe)||m.skip_effect(le.e);m.oncommit(x),m.ondiscard(()=>{})}else x();g&&D(!0),z(u)}),p={effect:n,items:r,outrogroups:null,fallback:t};h=!1,T&&(i=S)}function R(e){for(;e!==null&&(e.f&Te)===0;)e=e.next;return e}function Oe(e,a,s,f,c){var l=a.length,i=e.items,r=R(e.effect.first),o,t=null,u=[],d=[],h,x,n,p;for(p=0;p<l;p+=1){if(h=a[p],x=c(h,p),n=i.get(x).e,e.outrogroups!==null)for(const b of e.outrogroups)b.pending.delete(n),b.done.delete(n);if((n.f&M)!==0)if(n.f^=M,n===r)I(n,null,s);else{var v=t?t.next:r;n===e.effect.last&&(e.effect.last=n.prev),n.prev&&(n.prev.next=n.next),n.next&&(n.next.prev=n.prev),C(e,t,n),C(e,n,v),I(n,v,s),t=n,u=[],d=[],r=R(t.next);continue}if((n.f&q)!==0&&G(n),n!==r){if(o!==void 0&&o.has(n)){if(u.length<d.length){var g=d[0],_;t=g.prev;var k=u[0],m=u[u.length-1];for(_=0;_<u.length;_+=1)I(u[_],g,s);for(_=0;_<d.length;_+=1)o.delete(d[_]);C(e,k.prev,m.next),C(e,t,k),C(e,m,g),r=g,t=m,p-=1,u=[],d=[]}else o.delete(n),I(n,r,s),C(e,n.prev,n.next),C(e,n,t===null?e.effect.first:t.next),C(e,t,n),t=n;continue}for(u=[],d=[];r!==null&&r!==n;)(o??=new Set).add(r),d.push(r),r=R(r.next);if(r===null)continue}(n.f&M)===0&&u.push(n),t=n,r=R(n.next)}if(e.outrogroups!==null){for(const b of e.outrogroups)b.pending.size===0&&(Y(K(b.done)),e.outrogroups?.delete(b));e.outrogroups.size===0&&(e.outrogroups=null)}if(r!==null||o!==void 0){var E=[];if(o!==void 0)for(n of o)(n.f&q)===0&&E.push(n);for(;r!==null;)(r.f&q)===0&&r!==e.fallback&&E.push(r),r=R(r.next);var A=E.length;if(A>0){var y=l===0?s:null;Le(e,E,y)}}}function Ve(e,a,s,f,c,l,i,r){var o=(i&Ee)!==0?(i&we)===0?ie(s,!1,!1):Z(s):null,t=(i&ke)!==0?Z(c):null;return{v:o,i:t,e:L(()=>(l(a,o??s,t??c,r),()=>{e.delete(f)}))}}function I(e,a,s){if(e.nodes)for(var f=e.nodes.start,c=e.nodes.end,l=a&&(a.f&M)===0?a.nodes.start:s;f!==null;){var i=ze(f);if(l.before(f),f===c)return;f=i}}function C(e,a,s){a===null?e.effect.first=s:a.next=s,s===null?e.effect.last=a:s.prev=a}var qe=Q('<div class="rounded-2xl border border-zinc-200 bg-zinc-50 p-8 text-center"><h2 class="text-2xl font-bold text-zinc-800">Закладок пока нет</h2> <p class="mt-2 text-zinc-600">Откройте статьи и добавьте нужные в закладки.</p> <a href="/posts" class="mt-5 inline-flex rounded-lg bg-zinc-900 px-4 py-2 text-sm font-semibold text-white">Перейти к статьям</a></div>'),Pe=Q('<article class="rounded-2xl border border-zinc-200 bg-white p-4 shadow-sm"><a class="block"><h3 class="text-xl font-bold text-zinc-900 hover:text-stone-700"> </h3></a> <p class="mt-2 text-sm text-zinc-500"> </p> <div class="mt-4 flex items-center justify-between gap-2"><a class="inline-flex rounded-lg bg-stone-100 px-3 py-1.5 text-sm font-medium text-stone-800">Открыть</a> <button type="button" class="inline-flex rounded-lg bg-zinc-100 px-3 py-1.5 text-sm font-medium text-zinc-700 hover:bg-zinc-200">Убрать</button></div></article>'),Ue=Q('<div class="grid grid-cols-1 gap-3 md:grid-cols-2"></div>');function Je(e,a){ye(a,!1);let s=ie([]);const f=()=>{Fe(s,ue().sort((t,u)=>u.updatedAt-t.updatedAt))},c=t=>{de({slug:t.slug,title:t.title,path:t.path}),f()};oe(()=>(f(),window.addEventListener("storage",f),window.addEventListener("aiz:bookmarks-changed",f),()=>{window.removeEventListener("storage",f),window.removeEventListener("aiz:bookmarks-changed",f)})),ce();var l=Ce(),i=Me(l);{var r=t=>{var u=qe();H(t,u)},o=t=>{var u=Ue();He(u,5,()=>z(s),De,(d,h)=>{var x=Pe(),n=F(x),p=F(n),v=F(p,!0);N(p),N(n);var g=P(n,2),_=F(g,!0);N(g);var k=P(g,2),m=F(k),E=P(m,2);N(k),N(x),Re(()=>{j(n,"href",z(h).path),$(v,z(h).title),$(_,z(h).path),j(m,"href",z(h).path)}),Se("click",E,()=>c(z(h))),H(d,x)}),N(u),H(t,u)};Be(i,t=>{z(s).length===0?t(r):t(o,!1)})}H(e,l),Ne()}export{Je as default};
